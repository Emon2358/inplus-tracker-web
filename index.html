<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>v86 + Windows 98 SE (Internet Archive版)</title>
  <style>
    html, body { margin: 0; height: 100%; background: #000; }
    #screen { width: 100%; height: 100%; display: block; }
  </style>
</head>
<body>
  <canvas id="screen"></canvas>

  <!-- v86 本体 -->
  <script src="https://unpkg.com/v86/build/libv86.js"></script>
  <script>
    // Internet Archive の ISO URL（ファイル名は適宜確認）
    const iaIso = "https://archive.org/download/Win98SEOEMJapanese/ja_win98_se_oem.iso";
    // CORS プロキシ経由で取得
    const cdromUrl = "https://api.allorigins.win/raw?url=" + encodeURIComponent(iaIso);

    const emulator = new V86Starter({
      wasm_path: "https://unpkg.com/v86/build/v86.wasm",
      memory_size: 128 * 1024 * 1024,
      screen_container: document.getElementById("screen"),
      bios:    { url: "https://unpkg.com/v86/build/bios/seabios.bin" },
      vga_bios:{ url: "https://unpkg.com/v86/build/bios/vgabios.bin" },

      // CD-ROM に CORS プロキシ経由の ISO を指定
      cdrom: { url: cdromUrl }
    });

    // 起動ログをブラウザコンソールへ出力
    emulator.add_listener("serial0-output-char", char => console.log(char));
  </script>
</body>
</html>
